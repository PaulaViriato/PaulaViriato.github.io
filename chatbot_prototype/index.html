<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>Chatbot - Prot√≥tipo</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/toastr/toastr.min.css">
	<link rel="stylesheet" href="assets/css/main_.css">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/chatbot.png">
	<link rel="stylesheet" href="assets/bootstrap_main.113b027227d642d29bb3.css">
	<link rel="stylesheet" href="assets/bootstrap_qr-097975c55a8af519e700.css">
	<link rel="stylesheet" href="assets/lazy_loaded_high_priority_components.e9c4fa81edbe6df6bce3.css">
	<link rel="stylesheet" href="assets/lazy_loaded_low_priority_components.1139caee00c1c1138ce2">
	<link type="text/css" rel="stylesheet" href="https://static.xx.fbcdn.net/rsrc.php/v3/yw/l/0,cross/T8hM_1-ZE1Ae4klvcedSzj.css?_nc_x=eZqbhIWaq0V" data-bootloader-hash="Z4514Uy" crossorigin="anonymous" data-p=":5,48" data-c="1" />
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3/y8/r/5fQA5x2457X.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3/y8/r/5fQA5x2457X.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="xVVNv+f" async="1" crossorigin="anonymous" data-p=":1" data-c="1" onload="_btldr[&quot;xVVNv+f&quot;]=1" onerror="_btldr[&quot;xVVNv+f&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3i83I4/yE/l/pt_BR/SlHK_36p7Vw7pxNRj2vAEC7zfyeyCoQLwuzhboZUjzNMwBb93xf-F3byyJwL4xcwHwdWF3xRrwg89hZH-8Cw0YIaojmzYQK4N0IpfQ7wDCLNiPiRzj0Qe619rVh9FhWhkwY3Wia09kN2LnOpIZAacXo1cOgBcZRfmT7p6c7x-P8Rgxh8aoKWuynmjyMwYWKEY6UVOyQ21pq0dxSVaWeDJdd31ThywgmklwnT32NEIBCyF3x53XroPvxpt-iI2XG2aJmc7K5HcwBEVjVUTQnp9vjOkflsWdiAJKxVMJT90PNlFLS7z1Y1Loje7y9_x8ikRN6PmKrq1M.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3i83I4/yE/l/pt_BR/SlHK_36p7Vw7pxNRj2vAEC7zfyeyCoQLwuzhboZUjzNMwBb93xf-F3byyJwL4xcwHwdWF3xRrwg89hZH-8Cw0YIaojmzYQK4N0IpfQ7wDCLNiPiRzj0Qe619rVh9FhWhkwY3Wia09kN2LnOpIZAacXo1cOgBcZRfmT7p6c7x-P8Rgxh8aoKWuynmjyMwYWKEY6UVOyQ21pq0dxSVaWeDJdd31ThywgmklwnT32NEIBCyF3x53XroPvxpt-iI2XG2aJmc7K5HcwBEVjVUTQnp9vjOkflsWdiAJKxVMJT90PNlFLS7z1Y1Loje7y9_x8ikRN6PmKrq1M.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="AJf0bcj" async="1" crossorigin="anonymous" data-p=":285,19,10,189,44,228,93,114,49,59,71,45,107,134,190,67,202,29,74,2,96,36,138,41,0,468,178,60,56,12" data-c="1" onload="_btldr[&quot;AJf0bcj&quot;]=1" onerror="_btldr[&quot;AJf0bcj&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3iKp_4/yt/l/pt_BR/y4GIbu3IQiUhs75dmY_Sz8sqClSuI8q80AW6vuL_saR9ITR7Ufu_sA9EFYL5zIRwvN0iCwOv3OUSvymT6KUN26faGkQF0bX6erjpRD6kqD4tMB.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3iKp_4/yt/l/pt_BR/y4GIbu3IQiUhs75dmY_Sz8sqClSuI8q80AW6vuL_saR9ITR7Ufu_sA9EFYL5zIRwvN0iCwOv3OUSvymT6KUN26faGkQF0bX6erjpRD6kqD4tMB.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="3DmhjV+" async="1" crossorigin="anonymous" data-p=":3,7,183,22,112,13,47,8,31,72" data-c="1" onload="_btldr[&quot;3DmhjV+&quot;]=1" onerror="_btldr[&quot;3DmhjV+&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3iTro4/yM/l/pt_BR/CCXJz2jl17X.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3iTro4/yM/l/pt_BR/CCXJz2jl17X.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="hH8gMis" async="1" crossorigin="anonymous" data-p=":4" data-c="1" onload="_btldr[&quot;hH8gMis&quot;]=1" onerror="_btldr[&quot;hH8gMis&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3ivt64/yQ/l/pt_BR/M9cyxwpGL_nl92FrJPKvn9R43NY7jtUjaikM53pUB5Fhy1SYxk_LC7QbLCbjDT7gIZHqEm7JnIEShjEY058b3C90lkLkflNFg8xOPsUnaDCHxd7widWHAVbji3x0IXK3QzDo.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3ivt64/yQ/l/pt_BR/M9cyxwpGL_nl92FrJPKvn9R43NY7jtUjaikM53pUB5Fhy1SYxk_LC7QbLCbjDT7gIZHqEm7JnIEShjEY058b3C90lkLkflNFg8xOPsUnaDCHxd7widWHAVbji3x0IXK3QzDo.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="cw0voTE" async="1" crossorigin="anonymous" data-p=":15,38,166,206,16,383,35,143,180,46,26,21" data-c="1" onload="_btldr[&quot;cw0voTE&quot;]=1" onerror="_btldr[&quot;cw0voTE&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3iV3s4/y4/l/pt_BR/HaPMSNg5zC_A0mSQDSp3SXZF-tmS6O8at24S2hk2oljGSYk7jQBkukVI1DNkxFIedl3JW_CntHd_PgyzhMoKnUl7QUPaJ2tX9TUWEiklzST7JSJxLK_p8Cf4RMu80TIwFpdIUT2I6pFgX5lbXJqxjSOkjd-pMk-7w6GtFxLKY3ExBKeV5lg0n-LRjZupnE8Pz2GLZHHdvckoqcA3HRX4p9dH4JsHNq8VWQ8CkQdBLAHOPea02mc_IQeRazweHXJnBjZm_QspVvIQqCktYFjTPxGuskS0yVji_k6MpNLo26czBczOP3adQxPULbJ1LhqoqWkB-blJPq.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3iV3s4/y4/l/pt_BR/HaPMSNg5zC_A0mSQDSp3SXZF-tmS6O8at24S2hk2oljGSYk7jQBkukVI1DNkxFIedl3JW_CntHd_PgyzhMoKnUl7QUPaJ2tX9TUWEiklzST7JSJxLK_p8Cf4RMu80TIwFpdIUT2I6pFgX5lbXJqxjSOkjd-pMk-7w6GtFxLKY3ExBKeV5lg0n-LRjZupnE8Pz2GLZHHdvckoqcA3HRX4p9dH4JsHNq8VWQ8CkQdBLAHOPea02mc_IQeRazweHXJnBjZm_QspVvIQqCktYFjTPxGuskS0yVji_k6MpNLo26czBczOP3adQxPULbJ1LhqoqWkB-blJPq.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="OGP/kTo" async="1" crossorigin="anonymous" data-p=":62,248,354,1119,70,235,14581,371,335,237,221,146,278,142,362,32,174,159,50,199,92,155,169,182,307,11,173,105,388,530" data-c="1" onload="_btldr[&quot;OGP\/kTo&quot;]=1" onerror="_btldr[&quot;OGP\/kTo&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3itwa4/yK/l/pt_BR/xShegeWBTxq.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3itwa4/yK/l/pt_BR/xShegeWBTxq.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="PIUrgmK" async="1" crossorigin="anonymous" data-p=":355" data-c="1" onload="_btldr[&quot;PIUrgmK&quot;]=1" onerror="_btldr[&quot;PIUrgmK&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3i9ar4/yU/l/pt_BR/SBCTUfZSzpF.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3i9ar4/yU/l/pt_BR/SBCTUfZSzpF.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="cuHmDp/" async="1" crossorigin="anonymous" data-p=":14" data-c="1" onload="_btldr[&quot;cuHmDp\/&quot;]=1" onerror="_btldr[&quot;cuHmDp\/&quot;]=1" nonce="le4iJfVW"></script>
	<link rel="preload" href="https://static.xx.fbcdn.net/rsrc.php/v3iKRU4/yZ/l/pt_BR/fGP85CcuK-N.js?_nc_x=eZqbhIWaq0V" as="script" crossorigin="anonymous" nonce="le4iJfVW" /><script src="https://static.xx.fbcdn.net/rsrc.php/v3iKRU4/yZ/l/pt_BR/fGP85CcuK-N.js?_nc_x=eZqbhIWaq0V" data-bootloader-hash="/EWkPtB" async="1" crossorigin="anonymous" data-p=":216" data-c="1" onload="_btldr[&quot;\/EWkPtB&quot;]=1" onerror="_btldr[&quot;\/EWkPtB&quot;]=1" nonce="le4iJfVW"></script>

	<style type="text/css">
		.boxhour{
			margin-top:5px;
			text-align:right;
			width:100%;
			font-size:10px;
		}

		.botbox{
			background-color:#1F7A8C;
			color:white;
			-webkit-hyphens: auto;
			-ms-hyphens: auto;
			hyphens: auto;
		}

		.userbox{
			background-color:#022B3A;
			color:white;
		}
	</style>
</head>

<body style="overflow:auto;background-image:url('assets/img/techbackground.jpg');">
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/toastr/toastr.js"></script>
	<script src="assets/scripts/bootstrap_qr.4b9c044a48c9fc5005b0.js"></script>

	<div id="wrapper">
		<div class="vertical-align-wrap">
			<div class="vertical-align-middle" style="margin:0px;">
				<button id="dialogbuttom" style="position:fixed;bottom:2%;right:1%;border:0px;background-color:transparent;" onclick="uncollapse()"><img style="height:100px;" src="assets/img/button.png" alt="Klorofil Logo" class="img-responsive logo"></button>
				<div class="content" id="dialogpanel" style="bottom:1%;right:1%;width:400px;height:550px;overflow:auto;position:fixed;padding:5px;">
					<div class="auth-box" onclick="collapsed()" style="width:100%;height:100%;border-bottom-right-radius:0px;border-bottom-left-radius:0px;height:10%;overflow:auto;position:relative;background-color:#1F7A8C;color:white;">
						<img style="height:75%;margin:1%;" src="assets/img/atendente.png">
						&nbsp&nbsp&nbspATTENDANT&nbsp:&nbsp <b>Bot</b>
						<button type="button" id="closepanel" class="close" onclick="collapsed()" style="color:white;margin-right:2%;margin-top:1%;">
							<span style="color:white;">&times;</span>
						</button>
					</div>
					<div class="auth-box" style="width:100%;height:100%;border-top-right-radius:0px;border-top-left-radius:0px;height:90%;overflow:auto;position:relative;">
						<div class="content" style="height:100%;position:relative;">
							<div class="content" lang="en" id="painel-user-bot" style="width:97%;height:88%;border-radius:10px;background-color:#E1E5F2;margin:1%;overflow-y:auto;overflow-x:hidden;color:white;font-family:'Consolas';padding:1%;padding-bottom:5%;padding-top:0%;margin-top:2%;padding-left:5px;padding-right:5px;">
								<div class="l60d2q6s d1544ag0 sj5x9vvc tw6a2znq l9j0dhe7 ni8dbmo4 stjgntxs qlfml3jp inkptoze jk6sbkaj qmr60zad jm1wdb64 qv66sw1b ljqsnud1 g6srhlxm odn2s2vf chatbox botbox" style="width:75%;margin-top:5px;"><div dir="auto" class="oo9gr5id"><span class="spanmessage"><b>Bot: </b>Hi, I'm Bot! I'm here to demonstrate my behavior, talk to you... Just get started!<br></span><div class="boxhour"><span class="spanhour" id="hour0"></span></div></div></div>
								<div class='collapse' id='atddigitando' style="padding-left:5px;position:absolute;bottom:11%;left:2%;color:#1F7A8C;">The attendant is typing...</div>
							</div>
							<div id="user-panel" style="width:98%;">
								<div class="input-group" style="width:100%;padding-top:5px;padding-bottom:0px;padding-left:1%;border-radius:0px;box-shadow:0px 0px 0px 0 rgb(0 0 0)">
									<input id="msg-user" class="form-control" type="text" style="margin-left:0px;height:25px;width:83%;font-size:14px;color:black;margin-top:1px;font-size:12px;" placeholder="Message"/>
									<button class="btn" onclick="send()" style="width:14%;margin-left:3%;margin-bottom:0px;padding:0px;height:25px;margin-top:0px;text-align:center;font-size:12px;">Send</span></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>
	<script src="assets/vendor/chartist/js/chartist.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script src="assets/scripts/main.js"></script>

	<script type="text/javascript">
		userbox = '<div class="l60d2q6s d1544ag0 sj5x9vvc tw6a2znq l9j0dhe7 ni8dbmo4 stjgntxs kdgqqoy6 inkptoze e72ty7fz qmr60zad jm1wdb64 qv66sw1b ljqsnud1 g6srhlxm odn2s2vf chatbox userbox" style="margin-left:25%;width:75%;margin-top:5px;"><div dir="auto" class="ljqsnud1"><span class="spanmessage">';
		botbox = '<div class="l60d2q6s d1544ag0 sj5x9vvc tw6a2znq l9j0dhe7 ni8dbmo4 stjgntxs qlfml3jp inkptoze jk6sbkaj qmr60zad jm1wdb64 qv66sw1b ljqsnud1 g6srhlxm odn2s2vf chatbox botbox" style="width:75%;margin-top:5px;"><div dir="auto" class="oo9gr5id"><span class="spanmessage">';
		boxhour_begin = '<br></span><div class="boxhour"><span class="spanhour">';
		boxhour_end = '</span></div></div></div>';
		context = "";

		function modifyPage (){
			var elements = document.getElementsByClassName("chatbox");
			userpainel = document.getElementById("painel-user-bot");
			totalwidth = parseInt(parseFloat(userpainel.getBoundingClientRect().width)*0.97);
			if (userpainel.scrollHeight > userpainel.clientHeight){
				totalwidth = parseInt(parseFloat(userpainel.getBoundingClientRect().width)*0.97)-15;
			}

			for (i=0; i < elements.length; i++){
				elewidth = parseInt(elements[i].getBoundingClientRect().width);
				spanwidth = parseInt(elements[i].getElementsByClassName("spanmessage")[0].getBoundingClientRect().width)+26;
				hourwidth = parseInt(elements[i].getElementsByClassName("spanhour")[0].getBoundingClientRect().width)+26;
				typeuser = parseInt(elements[i].getElementsByClassName("ljqsnud1").length);
				if (spanwidth > hourwidth){
					if (spanwidth <= elewidth){
						elements[i].style.width = spanwidth+"px";
						if (typeuser > 0){
							margin = totalwidth - spanwidth;
							elements[i].style.marginLeft = margin+"px";
						}
					}
				} else {
					if (hourwidth <= elewidth){
						elements[i].style.width = hourwidth+"px";
						if (typeuser > 0){
							margin = totalwidth - hourwidth;
							elements[i].style.marginLeft = margin+"px";
						}
					}
				}
			}
		}

		function uncollapse (){
			$('#dialogpanel').removeClass("collapse");
			$('#dialogbuttom').addClass("collapse");
		}

		function collapsed (){
			$('#dialogbuttom').removeClass("collapse");
			$('#dialogpanel').addClass("collapse");
		}

		function updateScroll (){
			var element = document.getElementById("painel-user-bot");
			element.scrollTop = element.scrollHeight;
		}

		function setDigitando (){
			text = $('#atddigitando').html();
			if ((text.split(".").length-1) < 3){
				$('#atddigitando').html(text+".");
			} else {
				$('#atddigitando').html("The attendant is typing.");
			}
		}

		function setNumber (number){
			if (number < 10){ return '0'+number;
			} else { return ''+number; }
		}

		function send (){
			message = document.getElementById("msg-user").value;
			document.getElementById("msg-user").value = "";

			date = new Date();
			strdate = date.getUTCFullYear()+"/"+setNumber(date.getMonth()+1)+"/"+setNumber(date.getDate())+" ";
			strdate += setNumber(date.getHours())+":"+setNumber(date.getMinutes());
			beginbot = "<b>Bot: </b>";

			user_message = "<b>You: </b>"+message+"";
			text = $('#painel-user-bot').html() + userbox + user_message;
			text += boxhour_begin+strdate+boxhour_end;
			$('#painel-user-bot').html(""+text);
			modifyPage();
			updateScroll();

			$('#atddigitando').removeClass("collapse");
			urlsend = 'http://b6da83e93838.ngrok.io/';
			$.ajax({
				type: "POST",
				url: urlsend,
				data: {context: context, sentence: message},
				success: function (response){
					response = JSON.parse(response);
					date = new Date();
					strdate = date.getUTCFullYear()+"/"+setNumber(date.getMonth()+1)+"/"+setNumber(date.getDate())+" ";
					strdate += setNumber(date.getHours())+":"+setNumber(date.getMinutes());

					if (response["success"] == "true"){
						text = $('#painel-user-bot').html();
						text += botbox+beginbot+response["response"];
						text += boxhour_begin+strdate+boxhour_end;
						$('#painel-user-bot').html(""+text);
						context = response["context"];
						modifyPage();
						updateScroll();
					} else {
						user_message = botbox+beginbot+"We have instability at the moment.";
						user_message += boxhour_begin+strdate+boxhour_end;
						user_message += botbox+beginbot+"Come back in a few minutes!";
						user_message += boxhour_begin+strdate+boxhour_end;
						text = $('#painel-user-bot').html() + user_message;
						$('#painel-user-bot').html(""+text);
						modifyPage();
						updateScroll();
					}
				},
				complete: function(xhr, textStatus) {
					if (parseInt(xhr.status) != 200){
						date = new Date();
						strdate = date.getUTCFullYear()+"/"+setNumber(date.getMonth()+1)+"/"+setNumber(date.getDate())+" ";
						strdate += setNumber(date.getHours())+":"+setNumber(date.getMinutes());

						user_message = botbox+beginbot+"We have instability at the moment.";
						user_message += boxhour_begin+strdate+boxhour_end;
						user_message += botbox+beginbot+"Come back in a few minutes!";
						user_message += boxhour_begin+strdate+boxhour_end;
						text = $('#painel-user-bot').html() + user_message;
						$('#painel-user-bot').html(""+text);
						modifyPage();
						updateScroll();
					}
					$('#atddigitando').addClass("collapse");
				}
			});
		}

		setInterval('setDigitando()', 750);
		$(document).keypress(function(e){
			if(e.which == 13){ send(); }
		});

		window.addEventListener("load", function() {
			var bannerNode = document.querySelector('[alt="www.000webhost.com"]').parentNode.parentNode;
			bannerNode.parentNode.removeChild(bannerNode);
		});

		$(document).ready(function() {
			date = new Date();
			strdate = setNumber(date.getDate())+"/"+setNumber(date.getMonth()+1)+"/"+date.getUTCFullYear()+" ";
			strdate += setNumber(date.getHours())+":"+setNumber(date.getMinutes());
			$('#hour0').html(strdate);
			$('#dialogbuttom').click();
			modifyPage();
			$('#closepanel').click();
		});
	</script>
</body>
</html>